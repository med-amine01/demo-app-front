<!-- Page Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="h4 mb-1">
      <i class="bi bi-graph-up me-2"></i>
      Reports
    </h2>
    <p class="text-muted mb-0">Analytics and insights for your inventory</p>
  </div>
  <div class="btn-group">
    <button class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
      <i class="bi bi-download me-1"></i>
      Export
    </button>
    <ul class="dropdown-menu">
      <li *ngFor="let format of exportFormats">
        <a class="dropdown-item" href="#">{{ format }}</a>
      </li>
    </ul>
  </div>
</div>

<!-- Sales Overview -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-white border-bottom">
        <h5 class="mb-0">
          <i class="bi bi-bar-chart me-2"></i>
          Sales Overview (Last 6 Months)
        </h5>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead class="table-light">
              <tr>
                <th>Month</th>
                <th>Sales Revenue</th>
                <th>Orders</th>
                <th>Average Order Value</th>
                <th>Trend</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of salesData">
                <td>
                  <span class="fw-medium">{{ data.month }}</span>
                </td>
                <td>
                  <span class="fw-semibold text-dark"
                    >${{ data.sales.toLocaleString() }}</span
                  >
                </td>
                <td>
                  <span class="badge bg-light text-dark border">{{
                    data.orders
                  }}</span>
                </td>
                <td>
                  <span class="text-muted"
                    >${{
                      calculateAverageOrderValue(data.sales, data.orders)
                    }}</span
                  >
                </td>
                <td>
                  <i class="bi bi-arrow-up text-muted"></i>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Top Products & Inventory Alerts -->
<div class="row mb-4">
  <!-- Top Products -->
  <div class="col-lg-6">
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-white border-bottom">
        <h5 class="mb-0">
          <i class="bi bi-trophy me-2"></i>
          Top Selling Products
        </h5>
      </div>
      <div class="card-body">
        <div
          *ngFor="let product of topProducts; let i = index"
          class="d-flex align-items-center mb-3"
        >
          <div
            class="bg-light rounded-circle d-flex align-items-center justify-content-center me-3"
            style="width: 40px; height: 40px"
          >
            <span class="fw-bold text-dark">{{ i + 1 }}</span>
          </div>
          <div class="flex-grow-1">
            <div class="fw-medium">{{ product.name }}</div>
            <small class="text-muted">{{ product.sales }} sales</small>
          </div>
          <div class="text-end">
            <div class="fw-semibold text-dark">{{ product.revenue }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Inventory Alerts -->
  <div class="col-lg-6">
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-white border-bottom">
        <h5 class="mb-0">
          <i class="bi bi-exclamation-triangle me-2"></i>
          Inventory Alerts
        </h5>
      </div>
      <div class="card-body">
        <div
          *ngFor="let alert of inventoryAlerts"
          class="d-flex align-items-center mb-3"
        >
          <div class="me-3">
            <i class="bi bi-box text-muted fs-4"></i>
          </div>
          <div class="flex-grow-1">
            <div class="fw-medium">{{ alert.product }}</div>
            <small class="text-muted"
              >Current: {{ alert.current }} | Min: {{ alert.min }}</small
            >
          </div>
          <div>
            <span
              class="badge"
              [class]="
                alert.status === 'critical'
                  ? 'bg-dark text-light'
                  : alert.status === 'warning'
                    ? 'bg-light text-dark border'
                    : 'bg-light text-dark border'
              "
            >
              <i
                class="bi"
                [class]="
                  alert.status === 'critical'
                    ? 'bi-x-circle'
                    : alert.status === 'warning'
                      ? 'bi-exclamation-triangle'
                      : 'bi-check-circle'
                "
              ></i>
              {{ alert.status | titlecase }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Report Filters -->
<div class="row">
  <div class="col-12">
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-white border-bottom">
        <h5 class="mb-0">
          <i class="bi bi-funnel me-2"></i>
          Generate Custom Report
        </h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-3 mb-3">
            <label class="form-label">Date Range</label>
            <select class="form-select">
              <option>Last 7 days</option>
              <option>Last 30 days</option>
              <option>Last 3 months</option>
              <option>Last year</option>
            </select>
          </div>
          <div class="col-md-3 mb-3">
            <label class="form-label">Category</label>
            <select class="form-select">
              <option>All Categories</option>
              <option>Electronics</option>
              <option>Computers</option>
              <option>Mobile Phones</option>
              <option>Accessories</option>
            </select>
          </div>
          <div class="col-md-3 mb-3">
            <label class="form-label">Report Type</label>
            <select class="form-select">
              <option>Sales Report</option>
              <option>Inventory Report</option>
              <option>Product Performance</option>
              <option>Customer Analysis</option>
            </select>
          </div>
          <div class="col-md-3 mb-3 d-flex align-items-end">
            <button class="btn btn-primary w-100">
              <i class="bi bi-file-earmark-text me-1"></i>
              Generate Report
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
