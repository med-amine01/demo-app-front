<!-- Page Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="h4 mb-1">
      <i class="bi bi-grid me-2"></i>
      Products
    </h2>
    <p class="text-muted mb-0">Manage your inventory</p>
  </div>
  <button class="btn btn-primary">
    <i class="bi bi-plus-circle me-1"></i>
    Add Product
  </button>
</div>

<!-- Loading State -->
<div *ngIf="isLoading()" class="text-center py-5">
  <div
    class="spinner-border text-primary"
    role="status"
    style="width: 3rem; height: 3rem"
  >
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="text-muted mt-3">Loading products...</p>
</div>

<!-- Error State -->
<div
  *ngIf="error()"
  class="alert alert-danger d-flex align-items-center"
  role="alert"
>
  <i class="bi bi-exclamation-triangle-fill me-2"></i>
  <div>
    {{ error() }}
  </div>
  <button
    class="btn btn-outline-danger btn-sm ms-auto"
    (click)="loadProducts()"
  >
    <i class="bi bi-arrow-clockwise me-1"></i>Retry
  </button>
</div>

<!-- Products Table -->
<div
  *ngIf="!isLoading() && !error() && products().length > 0"
  class="table-responsive"
>
  <table class="table table-hover table-striped">
    <thead class="table-dark">
      <tr>
        <th>
          <i class="bi bi-box me-1"></i>
          Product
        </th>
        <th>
          <i class="bi bi-currency-dollar me-1"></i>
          Price
        </th>
        <th>
          <i class="bi bi-boxes me-1"></i>
          Stock
        </th>
        <th>
          <i class="bi bi-check-circle me-1"></i>
          Status
        </th>
        <th width="120">
          <i class="bi bi-gear me-1"></i>
          Actions
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products(); trackBy: trackByProductId">
        <td>
          <div class="d-flex align-items-center">
            <div
              class="bg-light rounded-circle d-flex align-items-center justify-content-center me-3"
              style="width: 40px; height: 40px"
            >
              <i class="bi bi-box text-dark"></i>
            </div>
            <div>
              <div class="fw-medium">{{ product.name }}</div>
              <small class="text-muted">ID: {{ product.id }}</small>
            </div>
          </div>
        </td>
        <td>
          <span class="fw-semibold text-dark">{{
            formattedPrice(product.price)
          }}</span>
        </td>
        <td>
          <span class="badge bg-light text-dark border">{{
            product.quantity
          }}</span>
        </td>
        <td>
          <span
            class="badge"
            [class]="
              product.quantity > 0
                ? 'bg-success text-white'
                : 'bg-danger text-white'
            "
          >
            <i
              class="bi"
              [class]="product.quantity > 0 ? 'bi-check-circle' : 'bi-x-circle'"
            ></i>
            {{ product.quantity > 0 ? 'In Stock' : 'Out of Stock' }}
          </span>
        </td>
        <td>
          <div class="btn-group btn-group-sm" role="group">
            <button
              class="btn btn-outline-primary"
              [routerLink]="['/products', product.id]"
              title="View Details"
            >
              <i class="bi bi-eye"></i>
            </button>
            <button class="btn btn-outline-primary" title="Edit">
              <i class="bi bi-pencil"></i>
            </button>
            <button class="btn btn-outline-primary" title="Delete">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Empty State -->
<div
  *ngIf="!isLoading() && !error() && products().length === 0"
  class="text-center py-5"
>
  <div class="mb-4">
    <i class="bi bi-box display-1 text-muted"></i>
  </div>
  <h4 class="text-muted mb-3">No Products Found</h4>
  <p class="text-muted mb-4">Get started by adding your first product.</p>
  <button class="btn btn-primary">
    <i class="bi bi-plus-circle me-2"></i>Add Product
  </button>
</div>
